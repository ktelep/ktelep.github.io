<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.18" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme')
      const systemDarkMode =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (userMode === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (userMode === 'dark' || systemDarkMode) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <title>Configuration | ktelep.github.io</title><meta name="description" content="Homepage of Kurt Telep">
    <link rel="preload" href="/assets/style-PoWje89h.css" as="style"><link rel="stylesheet" href="/assets/style-PoWje89h.css">
    <link rel="modulepreload" href="/assets/app-6qZbiVGh.js"><link rel="modulepreload" href="/assets/Configuration.html-DkYK4mQd.js"><link rel="modulepreload" href="/assets/loginpage-DNMVFmPH.js"><link rel="modulepreload" href="/assets/aos_on_ahv_wld_menu-Cj6zz9UP.js"><link rel="modulepreload" href="/assets/attachdisk-C2CfV7qk.js">
    <link rel="prefetch" href="/assets/index.html-Dw5uNsX7.js" as="script"><link rel="prefetch" href="/assets/bootcamps.html-B-RgS2xt.js" as="script"><link rel="prefetch" href="/assets/get-started.html-coS475Ky.js" as="script"><link rel="prefetch" href="/assets/ntnxce.html-CxagtDMa.js" as="script"><link rel="prefetch" href="/assets/projects.html-7h8nms-c.js" as="script"><link rel="prefetch" href="/assets/Ansible.html-BhNaDiSx.js" as="script"><link rel="prefetch" href="/assets/Labprep.html-5c3wiNUO.js" as="script"><link rel="prefetch" href="/assets/index.html-BP8iHIaV.js" as="script"><link rel="prefetch" href="/assets/Terraform.html-C9X4IUxi.js" as="script"><link rel="prefetch" href="/assets/Configuration.html-Bryv0a-u.js" as="script"><link rel="prefetch" href="/assets/DataProtection.html-CUvPCskm.js" as="script"><link rel="prefetch" href="/assets/DeployingWorkloads.html-DEGG7KxH.js" as="script"><link rel="prefetch" href="/assets/Labprep.html-Ckpy0Qpu.js" as="script"><link rel="prefetch" href="/assets/ManagingWorkloads.html-tBZEb3Ul.js" as="script"><link rel="prefetch" href="/assets/index.html-CDafYv0p.js" as="script"><link rel="prefetch" href="/assets/404.html-lK_626jw.js" as="script"><link rel="prefetch" href="/assets/setupDevtools-7MC2TMWH-D_nNDbBg.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/"><!----><span class="vp-site-name" aria-hidden="true">ktelep.github.io</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/" aria-label="Home"><!---->Home<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/bootcamps.html" aria-label="Bootcamps"><!---->Bootcamps<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/ntnxce.html" aria-label="CE"><!---->CE<!----></a></div><!--]--></nav><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/" aria-label="Home"><!---->Home<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/bootcamps.html" aria-label="Bootcamps"><!---->Bootcamps<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/ntnxce.html" aria-label="CE"><!---->CE<!----></a></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><a class="route-link route-link-active auto-link vp-sidebar-item vp-sidebar-heading" href="/ansible_terra_ntnx_101/" aria-label="Ansible and Terraform 101 Bootcamp"><!---->Ansible and Terraform 101 Bootcamp<!----></a><!----></li><li><a class="route-link route-link-active auto-link vp-sidebar-item vp-sidebar-heading active" href="/ansible_terra_ntnx_101/Configuration.html" aria-label="Configuration"><!---->Configuration<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/ansible_terra_ntnx_101/Terraform.html" aria-label="Terraform"><!---->Terraform<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/ansible_terra_ntnx_101/Ansible.html" aria-label="Ansible"><!---->Ansible<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/ansible_terra_ntnx_101/Labprep.html" aria-label="Lab Prep"><!---->Lab Prep<!----></a><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div class="theme-default-content" vp-content><!--[--><!--]--><div><h1 id="configuration" tabindex="-1"><a class="header-anchor" href="#configuration"><span>Configuration</span></a></h1><h2 id="getting-started" tabindex="-1"><a class="header-anchor" href="#getting-started"><span>Getting Started</span></a></h2><h3 id="prism-central" tabindex="-1"><a class="header-anchor" href="#prism-central"><span>Prism Central</span></a></h3><ol><li><p>Enter <em>PC-IP-ADDRESS</em> into a new browser tab.</p><p><img src="/images/loginpage.png" alt="Login Page"></p></li><li><p>If present, click on the &quot;Log in with your Nutanix Local Account&quot; link</p><div class="hint-container note"><p class="hint-container-title">Prism Central supports integration with many authentication providers, for this lab we will be using local accounts</p></div></li><li><p>Log in using the following credentials:</p><ul><li>Username - admin</li><li>Password - <em>HPOC-PASSWORD-PROVIDED-BY-INSTRUCTOR</em></li></ul></li><li><p>The Search feature is extremely useful in Prism Central, and the &#39;/&#39; key is a shortcut to access it from anywhere. You can use the search feature to access individual entities or entire configuration pages.</p></li></ol><h2 id="administrative-vm-deployment" tabindex="-1"><a class="header-anchor" href="#administrative-vm-deployment"><span>Administrative VM Deployment</span></a></h2><h3 id="admin-vm-overview" tabindex="-1"><a class="header-anchor" href="#admin-vm-overview"><span>Admin VM Overview</span></a></h3><p>In this section, we will deploy a Rocky Linux Virtual Machine, we will use a cloud-init script to modify the default cloud image and install ansible, terraform, and automatically download some template we&#39;ll be using.</p><h3 id="create-the-admin-vm" tabindex="-1"><a class="header-anchor" href="#create-the-admin-vm"><span>Create the Admin VM</span></a></h3><p>Lets use PC to deploy the Admin VM</p><ol><li><p>From the sidebar menu, select Compute &amp; Storage and then VMs</p><p><img src="/images/aos_on_ahv_wld_menu.png" alt="alt text"></p></li><li><p>Click the blue &quot;Create VM&quot; button to launch the create VM wizard</p></li><li><p>Fill out the following fields:</p><ul><li>Name: User##-AdminVM</li><li>Cluster: <em>Select your cluster</em></li><li>CPU: <em>1</em></li><li>Core per CPU: <em>2</em></li><li>Memory: <em>8</em></li></ul><p><img src="/images/auto_config_create_1.png" alt="alt text"></p></li><li><p>Click &quot;Next&quot; to go to the Resources Tab</p></li><li><p>Click the &quot;Attach Disk&quot; Button</p><p><img src="/images/attachdisk.png" alt="attach"></p></li><li><p>Select the following:</p><ul><li>Type: <em>Disk</em></li><li>Operation: <em>Clone From Image</em></li><li>Image: <em>Rocky-9-GenericCloud-Base.latest.x86_64.qcow2</em></li><li>Bus Type: <em>SCSI</em></li></ul><p><img src="/images/auto_config_create_2.png" alt="alt text"></p></li><li><p>Click &quot;Save&quot; to attach the Disk to the VM</p></li><li><p>Click &quot;Attach to Subnet&quot; Button to connect our VM to a network</p></li><li><p>Select the Following:</p><ul><li>VLAN: Primary</li><li>Network Connection State: Connected</li><li>Attachment Type: Access</li></ul><p><img src="/images/auto_config_create_3.png" alt="alt text"></p></li><li><p>Click &quot;Save&quot; to attach the vNIC to the VM</p></li><li><p>Our Rocky Image will use UEFI, so leave it at the default</p></li><li><p>Click &quot;Next&quot; to go to the Management Tab</p></li><li><p>At the bottom, under &quot;Guest Customization&quot; select &quot;Cloud-init (Linux)&quot; and paste the following script into the text box below. Be sure to update the FQDN line to reflect your user number</p></li></ol><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">#cloud-config</span>
<span class="line">ssh_pwauth: true</span>
<span class="line">users:</span>
<span class="line">  - name: nutanix</span>
<span class="line">    ssh_pwauth: True</span>
<span class="line">    sudo: [&#39;ALL=(ALL) NOPASSWD:ALL&#39;]</span>
<span class="line">chpasswd:</span>
<span class="line">  list: |</span>
<span class="line">    root:nutanix/4u</span>
<span class="line">    nutanix:nutanix/4u</span>
<span class="line">  expire: False</span>
<span class="line">runcmd:</span>
<span class="line">- &#39;su - nutanix -c &quot;curl -fsSL http://ktelep.github.io/scripts/install-code.sh | bash&quot;&#39;</span>
<span class="line">- dnf install -y dnf-plugins-core</span>
<span class="line">- dnf config-manager --add-repo https://rpm.releases.hashicorp.com/RHEL/hashicorp.repo</span>
<span class="line">- dnf install terraform packer -y</span>
<span class="line">- dnf install epel-release -y</span>
<span class="line">- dnf install ansible pip -y</span>
<span class="line">- pip3 install -r https://raw.githubusercontent.com/nutanix/nutanix.ansible/refs/heads/main/requirements.txt </span>
<span class="line">- pip3 install pywinrm </span>
<span class="line">- pip3 install pyvmomi==8.0.3</span>
<span class="line">- &#39;su - nutanix -c &quot;ansible-galaxy collection install nutanix.ncp&quot;&#39;</span>
<span class="line">- &#39;su - nutanix -c &quot;git clone https://github.com/ktelep/autolab&quot;&#39;</span>
<span class="line">- eject</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="/images/auto_config_create_5.png" alt="alt text"></p><ol start="14"><li><p>Click &quot;Next&quot; to get to the final review page</p></li><li><p>Review the VM configuration and click &quot;Create VM&quot;</p></li><li><p>Power on your Admin VM. It will begin performing the post installation configuration, this will take about 5-10 minutes to complete.</p><p><img src="/images/auto_config_create_4.png" alt="alt text"></p></li></ol><h3 id="connect-to-the-admin-vm" tabindex="-1"><a class="header-anchor" href="#connect-to-the-admin-vm"><span>Connect to the Admin VM</span></a></h3><ol><li><p>Identify the IP address of your Admin VM in Prism Central</p><p><img src="/images/auto_config_setup_1.png" alt="alt text"></p></li><li><p>Enter the https://<em>AdminVMIP</em> into a new browser tab inside your VDI Session. and the VS Code window should open. (Accept any insecure certificates)</p><p><img src="/images/auto_config_term_no.png" alt="alt text"></p></li><li><p>Click on the hamburger menu in the upper left hand corner, then select Terminal -&gt; New Terminal</p><p><img src="/images/auto_config_term_create.png" alt="alt text"></p></li><li><p>Your screen should now look like below, note the &quot;autolab&quot; folder on the left hand side. If this folder does not yet exist, please wait for it to show up before proceeding.</p><p><img src="/images/auto_config_term_open.png" alt="alt text"></p></li></ol></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="vp-meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: ktelep@gmail.com">Kurt Telep</span><!----><!--]--><!--]--></span></div></div></footer><nav class="vp-page-nav" aria-label="page navigation"><a class="route-link route-link-active auto-link prev" href="/ansible_terra_ntnx_101/" aria-label="Ansible and Terraform 101 Bootcamp"><div class="hint"><span class="arrow left"></span> Prev</div><div class="link"><span>Ansible and Terraform 101 Bootcamp</span></div></a><a class="route-link auto-link next" href="/ansible_terra_ntnx_101/Terraform.html" aria-label="Terraform"><div class="hint">Next <span class="arrow right"></span></div><div class="link"><span>Terraform</span></div></a></nav><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-6qZbiVGh.js" defer></script>
  </body>
</html>
