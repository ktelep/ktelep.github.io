import{_ as t}from"./loginpage-DNMVFmPH.js";import{_ as i}from"./aos_on_ahv_wld_menu-Cj6zz9UP.js";import{_ as n}from"./attachdisk-C2CfV7qk.js";import{_ as a,c as l,f as s,o}from"./app-6qZbiVGh.js";const r="/images/auto_config_create_1.png",p="/images/auto_config_create_2.png",c="/images/auto_config_create_3.png",m="/images/auto_config_create_5.png",u="/images/auto_config_create_4.png",d="/images/auto_config_setup_1.png",h="/images/auto_config_term_no.png",g="/images/auto_config_term_create.png",v="/images/auto_config_term_open.png",f={};function _(b,e){return o(),l("div",null,e[0]||(e[0]=[s('<h1 id="configuration" tabindex="-1"><a class="header-anchor" href="#configuration"><span>Configuration</span></a></h1><h2 id="getting-started" tabindex="-1"><a class="header-anchor" href="#getting-started"><span>Getting Started</span></a></h2><h3 id="prism-central" tabindex="-1"><a class="header-anchor" href="#prism-central"><span>Prism Central</span></a></h3><ol><li><p>Enter <em>PC-IP-ADDRESS</em> into a new browser tab.</p><p><img src="'+t+'" alt="Login Page"></p></li><li><p>If present, click on the &quot;Log in with your Nutanix Local Account&quot; link</p><div class="hint-container note"><p class="hint-container-title">Prism Central supports integration with many authentication providers, for this lab we will be using local accounts</p></div></li><li><p>Log in using the following credentials:</p><ul><li>Username - admin</li><li>Password - <em>HPOC-PASSWORD-PROVIDED-BY-INSTRUCTOR</em></li></ul></li><li><p>The Search feature is extremely useful in Prism Central, and the &#39;/&#39; key is a shortcut to access it from anywhere. You can use the search feature to access individual entities or entire configuration pages.</p></li></ol><h2 id="administrative-vm-deployment" tabindex="-1"><a class="header-anchor" href="#administrative-vm-deployment"><span>Administrative VM Deployment</span></a></h2><h3 id="admin-vm-overview" tabindex="-1"><a class="header-anchor" href="#admin-vm-overview"><span>Admin VM Overview</span></a></h3><p>In this section, we will deploy a Rocky Linux Virtual Machine, we will use a cloud-init script to modify the default cloud image and install ansible, terraform, and automatically download some template we&#39;ll be using.</p><h3 id="create-the-admin-vm" tabindex="-1"><a class="header-anchor" href="#create-the-admin-vm"><span>Create the Admin VM</span></a></h3><p>Lets use PC to deploy the Admin VM</p><ol><li><p>From the sidebar menu, select Compute &amp; Storage and then VMs</p><p><img src="'+i+'" alt="alt text"></p></li><li><p>Click the blue &quot;Create VM&quot; button to launch the create VM wizard</p></li><li><p>Fill out the following fields:</p><ul><li>Name: User##-AdminVM</li><li>Cluster: <em>Select your cluster</em></li><li>CPU: <em>1</em></li><li>Core per CPU: <em>2</em></li><li>Memory: <em>8</em></li></ul><p><img src="'+r+'" alt="alt text"></p></li><li><p>Click &quot;Next&quot; to go to the Resources Tab</p></li><li><p>Click the &quot;Attach Disk&quot; Button</p><p><img src="'+n+'" alt="attach"></p></li><li><p>Select the following:</p><ul><li>Type: <em>Disk</em></li><li>Operation: <em>Clone From Image</em></li><li>Image: <em>Rocky-9-GenericCloud-Base.latest.x86_64.qcow2</em></li><li>Bus Type: <em>SCSI</em></li></ul><p><img src="'+p+'" alt="alt text"></p></li><li><p>Click &quot;Save&quot; to attach the Disk to the VM</p></li><li><p>Click &quot;Attach to Subnet&quot; Button to connect our VM to a network</p></li><li><p>Select the Following:</p><ul><li>VLAN: Primary</li><li>Network Connection State: Connected</li><li>Attachment Type: Access</li></ul><p><img src="'+c+`" alt="alt text"></p></li><li><p>Click &quot;Save&quot; to attach the vNIC to the VM</p></li><li><p>Our Rocky Image will use UEFI, so leave it at the default</p></li><li><p>Click &quot;Next&quot; to go to the Management Tab</p></li><li><p>At the bottom, under &quot;Guest Customization&quot; select &quot;Cloud-init (Linux)&quot; and paste the following script into the text box below. Be sure to update the FQDN line to reflect your user number</p></li></ol><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">#cloud-config</span>
<span class="line">ssh_pwauth: true</span>
<span class="line">users:</span>
<span class="line">  - name: nutanix</span>
<span class="line">    ssh_pwauth: True</span>
<span class="line">    sudo: [&#39;ALL=(ALL) NOPASSWD:ALL&#39;]</span>
<span class="line">chpasswd:</span>
<span class="line">  list: |</span>
<span class="line">    root:nutanix/4u</span>
<span class="line">    nutanix:nutanix/4u</span>
<span class="line">  expire: False</span>
<span class="line">runcmd:</span>
<span class="line">- &#39;su - nutanix -c &quot;curl -fsSL http://ktelep.github.io/scripts/install-code.sh | bash&quot;&#39;</span>
<span class="line">- dnf install -y dnf-plugins-core</span>
<span class="line">- dnf config-manager --add-repo https://rpm.releases.hashicorp.com/RHEL/hashicorp.repo</span>
<span class="line">- dnf install terraform packer -y</span>
<span class="line">- dnf install epel-release -y</span>
<span class="line">- dnf install ansible pip -y</span>
<span class="line">- pip3 install -r https://raw.githubusercontent.com/nutanix/nutanix.ansible/refs/heads/main/requirements.txt </span>
<span class="line">- pip3 install pywinrm </span>
<span class="line">- pip3 install pyvmomi==8.0.3</span>
<span class="line">- &#39;su - nutanix -c &quot;ansible-galaxy collection install nutanix.ncp&quot;&#39;</span>
<span class="line">- &#39;su - nutanix -c &quot;git clone https://github.com/ktelep/autolab&quot;&#39;</span>
<span class="line">- eject</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+m+'" alt="alt text"></p><ol start="14"><li><p>Click &quot;Next&quot; to get to the final review page</p></li><li><p>Review the VM configuration and click &quot;Create VM&quot;</p></li><li><p>Power on your Admin VM. It will begin performing the post installation configuration, this will take about 5-10 minutes to complete.</p><p><img src="'+u+'" alt="alt text"></p></li></ol><h3 id="connect-to-the-admin-vm" tabindex="-1"><a class="header-anchor" href="#connect-to-the-admin-vm"><span>Connect to the Admin VM</span></a></h3><ol><li><p>Identify the IP address of your Admin VM in Prism Central</p><p><img src="'+d+'" alt="alt text"></p></li><li><p>Enter the https://<em>AdminVMIP</em> into a new browser tab inside your VDI Session. and the VS Code window should open. (Accept any insecure certificates)</p><p><img src="'+h+'" alt="alt text"></p></li><li><p>Click on the hamburger menu in the upper left hand corner, then select Terminal -&gt; New Terminal</p><p><img src="'+g+'" alt="alt text"></p></li><li><p>Your screen should now look like below, note the &quot;autolab&quot; folder on the left hand side. If this folder does not yet exist, please wait for it to show up before proceeding.</p><p><img src="'+v+'" alt="alt text"></p></li></ol>',15)]))}const k=a(f,[["render",_],["__file","Configuration.html.vue"]]),q=JSON.parse('{"path":"/ansible_terra_ntnx_101/Configuration.html","title":"Configuration","lang":"en-US","frontmatter":{},"headers":[{"level":2,"title":"Getting Started","slug":"getting-started","link":"#getting-started","children":[{"level":3,"title":"Prism Central","slug":"prism-central","link":"#prism-central","children":[]}]},{"level":2,"title":"Administrative VM Deployment","slug":"administrative-vm-deployment","link":"#administrative-vm-deployment","children":[{"level":3,"title":"Admin VM Overview","slug":"admin-vm-overview","link":"#admin-vm-overview","children":[]},{"level":3,"title":"Create the Admin VM","slug":"create-the-admin-vm","link":"#create-the-admin-vm","children":[]},{"level":3,"title":"Connect to the Admin VM","slug":"connect-to-the-admin-vm","link":"#connect-to-the-admin-vm","children":[]}]}],"git":{"updatedTime":1750740251000,"contributors":[{"name":"Kurt Telep","email":"ktelep@gmail.com","commits":3}]},"filePathRelative":"ansible_terra_ntnx_101/Configuration.md"}');export{k as comp,q as data};
