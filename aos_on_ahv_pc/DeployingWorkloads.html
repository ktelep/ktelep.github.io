<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.18" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme')
      const systemDarkMode =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (userMode === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (userMode === 'dark' || systemDarkMode) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <title>Deploying Workloads | ktelep.github.io</title><meta name="description" content="Homepage of Kurt Telep">
    <link rel="preload" href="/assets/style-PoWje89h.css" as="style"><link rel="stylesheet" href="/assets/style-PoWje89h.css">
    <link rel="modulepreload" href="/assets/app-CjI7Eko0.js"><link rel="modulepreload" href="/assets/DeployingWorkloads.html-Pg9uxfae.js"><link rel="modulepreload" href="/assets/aos_on_ahv_wld_menu-Cj6zz9UP.js">
    <link rel="prefetch" href="/assets/index.html-swjFZiQ8.js" as="script"><link rel="prefetch" href="/assets/bootcamps.html-DMnNJN9R.js" as="script"><link rel="prefetch" href="/assets/get-started.html-C1106jvX.js" as="script"><link rel="prefetch" href="/assets/ntnxce.html-Dix7XwdB.js" as="script"><link rel="prefetch" href="/assets/projects.html-Evxj0ji4.js" as="script"><link rel="prefetch" href="/assets/Configuration.html-CxAK81Lh.js" as="script"><link rel="prefetch" href="/assets/DataProtection.html-G1fiG3ji.js" as="script"><link rel="prefetch" href="/assets/Labprep.html-BLbDAE6_.js" as="script"><link rel="prefetch" href="/assets/ManagingWorkloads.html-DGjrtQMw.js" as="script"><link rel="prefetch" href="/assets/index.html-BMwNFeZ-.js" as="script"><link rel="prefetch" href="/assets/404.html-J5upWZjj.js" as="script"><link rel="prefetch" href="/assets/setupDevtools-7MC2TMWH-BoLdzQ4g.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/"><!----><span class="vp-site-name" aria-hidden="true">ktelep.github.io</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/" aria-label="Home"><!---->Home<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/bootcamps.html" aria-label="Bootcamps"><!---->Bootcamps<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/ntnxce.html" aria-label="CE"><!---->CE<!----></a></div><!--]--></nav><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/" aria-label="Home"><!---->Home<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/bootcamps.html" aria-label="Bootcamps"><!---->Bootcamps<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/ntnxce.html" aria-label="CE"><!---->CE<!----></a></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><a class="route-link route-link-active auto-link vp-sidebar-item vp-sidebar-heading" href="/aos_on_ahv_pc/" aria-label="AOS on AHV Bootcamp (PC)"><!---->AOS on AHV Bootcamp (PC)<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/aos_on_ahv_pc/Configuration.html" aria-label="Configuration"><!---->Configuration<!----></a><!----></li><li><a class="route-link route-link-active auto-link vp-sidebar-item vp-sidebar-heading active" href="/aos_on_ahv_pc/DeployingWorkloads.html" aria-label="Deploying Workloads"><!---->Deploying Workloads<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/aos_on_ahv_pc/ManagingWorkloads.html" aria-label="Managing Workloads"><!---->Managing Workloads<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/aos_on_ahv_pc/DataProtection.html" aria-label="Data Protection"><!---->Data Protection<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/aos_on_ahv_pc/Labprep.html" aria-label="Lab Prep"><!---->Lab Prep<!----></a><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div class="theme-default-content" vp-content><!--[--><!--]--><div><h1 id="deploying-workloads" tabindex="-1"><a class="header-anchor" href="#deploying-workloads"><span>Deploying Workloads</span></a></h1><h2 id="workload-overview" tabindex="-1"><a class="header-anchor" href="#workload-overview"><span>Workload Overview</span></a></h2><p>In addition to storage, VM creation, management, and monitoring can all be performed for Nutanix AHV directly through Prism. Prism also offers native support for VM CRUD (create, read, update, delete) operations for Nutanix clusters running ESXi. In the following exercise, we&#39;ll create VMs from source media and existing disk images.</p><h2 id="creating-a-windows-vm" tabindex="-1"><a class="header-anchor" href="#creating-a-windows-vm"><span>Creating a Windows VM</span></a></h2><p>You will now create a Windows Server VM from a Windows installation ISO image. AHV provides an Image Service feature to build a store of imported ISO or disk image files. The Image Service supports raw, vhd, vhdx, vmdk, vdi, iso, and qcow2 disk formats.</p><div class="hint-container note"><p class="hint-container-title">You can explore the available images and upload additional images under “Compute &amp; Storage -&gt; Images” or by searching “Images” in the search bar.</p></div><p>To provide high-performance IO to VMs, AHV requires installing paravirtualized drivers into the guest (similar to VMware Tools). For Windows guests specifically, these drivers must be loaded during installation for the VM&#39;s disk to be accessible by the Windows installer.</p><p>Nutanix validates and distributes these drivers via the Nutanix Portal. The ISO image containing the drivers has already been uploaded to the Image Service.</p><ol><li><p>From the Sidebar, select “Compute &amp; Storage -&gt; VMs” or search “VMs” in the search bar and selecting “VMs -&gt; List”</p><p><img src="/images/aos_on_ahv_wld_menu.png" alt="alt text"></p></li><li><p>Click the Blue “Create VM” button to launch the create VM wizard</p></li><li><p>Fill out the following fields:</p><ul><li>Name: <em>Initials</em>-WindowsVM</li><li>Cluster: <em>Select your cluster</em></li><li>CPU: <em>2</em></li><li>Core per CPU: <em>1</em></li><li>Memory: <em>8</em></li></ul><p><img src="/images/aos_on_ahv_wld_vm1.png" alt="alt text"></p></li><li><p>Click &quot;Next&quot; to go to the Resources Tab</p></li><li><p>Click the &quot;Attach Disk&quot; Button</p><p><img src="/images/attachdisk.png" alt="attach"></p></li><li><p>Select the following:</p><ul><li>Type: <em>CD-ROM</em></li><li>Operation: <em>Clone From Image</em></li><li>Image: <em>Select the Windows Server ISO image identified by your instructor</em></li><li>Bus Type: <em>SATA</em></li></ul><div class="hint-container note"><p class="hint-container-title">The Windows Server image name may be slightly different depending on version of lab that is deployed</p></div><div class="hint-container note"><p class="hint-container-title">AHV provides both SATA and IDE bus types. IDE bus type should only be used when specific compatibility is needed for older OS&#39;s or systems without the appropriate drivers installed. IDE CD-ROMS are not supported for UEFI boot.</p></div><p><img src="/images/aos_on_ahv_wld_vm2.png" alt="alt text"></p></li><li><p>Click &quot;Save&quot; attaching the Windows CD-ROM to the Virtual machine</p></li><li><p>Click the Blue &quot;Attach Disk&quot; link now found above the list of disks</p></li><li><p>Select the Following:</p><ul><li>Type: <em>Disk</em></li><li>Operation: <em>Allocate on Storage Container</em></li><li>Storage Container: <em>Initials</em>-Container</li><li>Capacity: <em>30GB</em></li><li>Bus Type: SCSI</li></ul><div class="hint-container note"><p class="hint-container-title">AHV provides SCSI and IDE bus types for disks. Again, IDE should only be used for specific compatibility is needed for older OS&#39;s or systems without appropriate drivers installed.</p></div><p><img src="/images/aos_on_ahv_wld_vm3.png" alt="alt text"></p></li><li><p>Click &quot;Save&quot; attaching a blank 30GB disk to the Virtual machine</p></li><li><p>Once again, click the &quot;Add Disk&quot; Link</p></li><li><p>Select the Following:</p><ul><li>Type: <em>CD-ROM</em></li><li>Operation: <em>Clone From Image</em></li><li>Image: <em>Select the VirtIO image identified by your instructor</em></li><li>Bus Type: <em>SATA</em></li></ul><p><img src="/images/aos_on_ahv_wld_vm4.png" alt="alt text"></p><div class="hint-container note"><p class="hint-container-title">Do you really want me to tell you about IDE vs. SATA again? I&#39;m sure you&#39;ve figured it out by now</p></div></li><li><p>Click &quot;Save&quot; attaching the VirtIO Driver ISO to the Virtual machine</p><div class="hint-container note"><p class="hint-container-title">VirtIO drivers are available as an ISO for use during initial installation or image creation, and as an MSI for management and upgrades.</p></div></li><li><p>Click &quot;Attach to Subnet&quot; Button to connect our VM to a network</p></li><li><p>Select the Following:</p><ul><li><p>Subnet: <em>Initials</em>-Network</p></li><li><p>Network Connection State: Connected</p></li><li><p>Attachment Type: Access</p><div class="hint-container note"><p class="hint-container-title">VM network connections can also be configured as trunk ports for specialized VMs that require access to multiple VLANs on the same vNIC</p></div></li></ul><p><img src="/images/aos_on_ahv_wld_vm5.png" alt="alt text"></p></li><li><p>Click &quot;Save&quot; to attach the vNIC to the VM</p></li><li><p>Select Legacy BIOS mode. A popup will appear confirming that you wish to use this mode.</p><p><img src="/images/LegacyBIOS.png" alt="alt text"></p><div class="hint-container note"><p class="hint-container-title">AHV supports UEFI VMs and vTPM along with SecureBoot and Credential Guard, for the sake of simplicity we will use Legacy BIOS for this bootcamp.</p></div></li><li><p>Click the blue &quot;Next&quot; button to move to the Management Tab</p></li><li><p>We are not going to apply any customization or categories at this time, so click &quot;Next&quot; again to go to the Review tab</p></li><li><p>At Review, scroll through and validate your VM configuration, then click &quot;Create VM&quot;. You may go back and revisit any part of the configuration by clicking the &quot;Edit&quot; link associated with that section.</p></li><li><p>After a few moments, you should see your VM in the list of Virtual Machines. You can use the filter bar at the top if you want to locate it in the list specifically.</p></li><li><p>Right Click the name of your Virtual Machine and select Power On from the menu</p><p><img src="/images/aos_on_ahv_wld_vm6.png" alt="alt text"></p></li><li><p>After a few moments, the dot next to the VM should change from Red to Green, and you will be able to select &quot;Launch Console&quot; from the right-click menu allowing you to interact with the VM.</p></li><li><p>Progress through the standard install questions until you reach the Windows install location. When prompted, choose:</p><ul><li>I don&#39;t have a product key</li><li>Windows Server 2019 Datacenter (Desktop Experience)</li><li>Custom Install Windows Only</li></ul></li><li><p>Click Load Driver, and Browse, navigating to the CD where the Nutanix VirtIO ISO is mounted.</p></li><li><p>Select the directory that corresponds to the Windows 2019.</p><p><img src="/images/aos_on_ahv_wld_vm7.png" alt="alt text"></p></li><li><p>Select all the drivers displayed. Press and hold the Ctrl key as you click on each one so they are all highlighted.</p><p><img src="/images/VirtIOInstall.png" alt="alt text"></p></li><li><p>Click &quot;Next&quot;</p></li><li><p>After the drivers are loaded the disk we created at the beginning of this procedure will appear as an installation target.<br><img src="/images/InstallDisk.png" alt="alt text"></p></li><li><p>Click &quot;Next&quot; and finish the installation. Be sure to set a memorable password following the VM reboot.</p><div class="hint-container note"><p class="hint-container-title">While waiting for your Windows VM to reboot, now is a good time to explore around the GUI a little more, just minimize the console window. You could also use this time to get a snack, talk to your friends in the room, or record a TikTok video.</p></div></li><li><p>Once you have finished the installation, use the &quot;Unmount ISO&quot; button in the console to unmount both of the CD-ROM devices.</p></li></ol><h3 id="installing-nutanix-guest-tools" tabindex="-1"><a class="header-anchor" href="#installing-nutanix-guest-tools"><span>Installing Nutanix Guest Tools</span></a></h3><p>Nutanix Guest Tools are not a requirement for all Virtual Machines. All required drivers are included in the VirtIO installation packages, however there are tools included in NGT that provide the ability for certain 3rd party backup tools and native Nutanix replication to leverage VSS and perform operations such as IP address changes during failover.</p><p>NGT can be deployed via Prism Central, or can be separately downloaded as an MSI installer and deployed using your tool of choice.</p><ol><li><p>To deploy NGT from Prism Central, right click on the VM and select &quot;Install NGT&quot;</p></li><li><p>Check both boxes for &quot;Enable Self Service&quot; and &quot;Enable Volume Snapshot Service&quot;</p></li><li><p>Leave &quot;Skip restart&quot; selected.</p><p><img src="/images/aos_on_ahv_wld_vm8.png" alt="alt text"></p></li><li><p>Click on &quot;Confirm &amp; Enter Password&quot;</p><p><img src="/images/aos_on_ahv_wld_vm9.png" alt="alt text"></p></li><li><p>We could add the Administrator username and password and NGT would get automatically installed, however since our network that we selected for this VM is not route-able, we will need to install NGT manually. Go ahead and click on &quot;Skip and Mount&quot; to mount the NGT CD-ROM</p></li><li><p>From the Console of your VM, go ahead and run the NGT installer from the mounted CD-ROM</p><p><img src="/images/aos_on_ahv_wld_vm10.png" alt="alt text"></p></li></ol><h2 id="creating-a-linux-vm" tabindex="-1"><a class="header-anchor" href="#creating-a-linux-vm"><span>Creating a Linux VM</span></a></h2><p>You will now create a CentOS VM from an existing, pre-installed disk image in the Image Service. It is common in many environments to have template-style images of pre-installed operating systems. Similar to the previous exercise, the disk image has already been uploaded to the Image Service.</p><ol><li><p>Click the blue &quot;Create VM&quot; button to launch the create VM wizard</p></li><li><p>Fill out the following fields:</p><ul><li>Name: <em>Initials</em>-LinuxVM</li><li>Cluster: <em>Select your cluster</em></li><li>CPU: <em>1</em></li><li>Core per CPU: <em>1</em></li><li>Memory: <em>2</em></li></ul><p><img src="/images/aos_on_ahv_wld_vm11.png" alt="alt text"></p></li><li><p>Click &quot;Next&quot; to go to the Resources Tab</p></li><li><p>Click the &quot;Attach Disk&quot; Button</p></li><li><p>Select the following:</p><ul><li>Type: <em>Disk</em></li><li>Operation: <em>Clone From Image</em></li><li>Image: <em>CentOS7.qcow2</em></li><li>Bus Type: <em>SCSI</em></li></ul><p><img src="/images/aos_on_ahv_wld_lnx01.png" alt="alt text"></p></li><li><p>Click &quot;Save&quot; to attach the Disk to the VM</p></li><li><p>Click &quot;Attach to Subnet&quot; Button to connect our VM to a network</p></li><li><p>Select the Following:</p><ul><li>VLAN: <em>Initials</em>-Network</li><li>Network Connection State: Connected</li><li>Attachment Type: Access</li></ul><div class="hint-container note"><p class="hint-container-title">VM network connections can also be configured as trunk ports for specialized VMs that require access to multiple VLANs on the same vNIC</p></div><p><img src="/images/aos_on_ahv_wld_vm5.png" alt="alt text"></p></li><li><p>Click &quot;Save&quot; to attach the vNIC to the VM</p></li><li><p>Our CentOS image uses Legacy BIOS Mode, so select Legacy BIOS Mode and leave the default boot order.</p></li><li><p>Click &quot;Next&quot; twice to get to the summary tab.</p></li><li><p>Review the VM configuration and click &quot;Create VM&quot;</p></li><li><p>(Optional) Power up the Linux VM and connect to the console to view the now running virtual machine.</p></li></ol></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="vp-meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: ktelep@gmail.com">Kurt Telep</span><!----><!--]--><!--]--></span></div></div></footer><nav class="vp-page-nav" aria-label="page navigation"><a class="route-link auto-link prev" href="/aos_on_ahv_pc/Configuration.html" aria-label="Configuration"><div class="hint"><span class="arrow left"></span> Prev</div><div class="link"><span>Configuration</span></div></a><a class="route-link auto-link next" href="/aos_on_ahv_pc/ManagingWorkloads.html" aria-label="Managing Workloads"><div class="hint">Next <span class="arrow right"></span></div><div class="link"><span>Managing Workloads</span></div></a></nav><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-CjI7Eko0.js" defer></script>
  </body>
</html>
