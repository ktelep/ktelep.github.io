<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.18" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme')
      const systemDarkMode =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (userMode === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (userMode === 'dark' || systemDarkMode) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <title>Configuration | ktelep.github.io</title><meta name="description" content="Homepage of Kurt Telep">
    <link rel="preload" href="/assets/style-PoWje89h.css" as="style"><link rel="stylesheet" href="/assets/style-PoWje89h.css">
    <link rel="modulepreload" href="/assets/app-6qZbiVGh.js"><link rel="modulepreload" href="/assets/Configuration.html-Bryv0a-u.js"><link rel="modulepreload" href="/assets/loginpage-DNMVFmPH.js">
    <link rel="prefetch" href="/assets/index.html-Dw5uNsX7.js" as="script"><link rel="prefetch" href="/assets/bootcamps.html-B-RgS2xt.js" as="script"><link rel="prefetch" href="/assets/get-started.html-coS475Ky.js" as="script"><link rel="prefetch" href="/assets/ntnxce.html-CxagtDMa.js" as="script"><link rel="prefetch" href="/assets/projects.html-7h8nms-c.js" as="script"><link rel="prefetch" href="/assets/Ansible.html-BhNaDiSx.js" as="script"><link rel="prefetch" href="/assets/Configuration.html-DkYK4mQd.js" as="script"><link rel="prefetch" href="/assets/Labprep.html-5c3wiNUO.js" as="script"><link rel="prefetch" href="/assets/index.html-BP8iHIaV.js" as="script"><link rel="prefetch" href="/assets/Terraform.html-C9X4IUxi.js" as="script"><link rel="prefetch" href="/assets/DataProtection.html-CUvPCskm.js" as="script"><link rel="prefetch" href="/assets/DeployingWorkloads.html-DEGG7KxH.js" as="script"><link rel="prefetch" href="/assets/Labprep.html-Ckpy0Qpu.js" as="script"><link rel="prefetch" href="/assets/ManagingWorkloads.html-tBZEb3Ul.js" as="script"><link rel="prefetch" href="/assets/index.html-CDafYv0p.js" as="script"><link rel="prefetch" href="/assets/404.html-lK_626jw.js" as="script"><link rel="prefetch" href="/assets/setupDevtools-7MC2TMWH-D_nNDbBg.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/"><!----><span class="vp-site-name" aria-hidden="true">ktelep.github.io</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/" aria-label="Home"><!---->Home<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/bootcamps.html" aria-label="Bootcamps"><!---->Bootcamps<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/ntnxce.html" aria-label="CE"><!---->CE<!----></a></div><!--]--></nav><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/" aria-label="Home"><!---->Home<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/bootcamps.html" aria-label="Bootcamps"><!---->Bootcamps<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/ntnxce.html" aria-label="CE"><!---->CE<!----></a></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><a class="route-link route-link-active auto-link vp-sidebar-item vp-sidebar-heading" href="/aos_on_ahv_pc/" aria-label="AOS on AHV Bootcamp (PC)"><!---->AOS on AHV Bootcamp (PC)<!----></a><!----></li><li><a class="route-link route-link-active auto-link vp-sidebar-item vp-sidebar-heading active" href="/aos_on_ahv_pc/Configuration.html" aria-label="Configuration"><!---->Configuration<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/aos_on_ahv_pc/DeployingWorkloads.html" aria-label="Deploying Workloads"><!---->Deploying Workloads<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/aos_on_ahv_pc/ManagingWorkloads.html" aria-label="Managing Workloads"><!---->Managing Workloads<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/aos_on_ahv_pc/DataProtection.html" aria-label="Data Protection"><!---->Data Protection<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/aos_on_ahv_pc/Labprep.html" aria-label="Lab Prep"><!---->Lab Prep<!----></a><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div class="theme-default-content" vp-content><!--[--><!--]--><div><h1 id="configuration" tabindex="-1"><a class="header-anchor" href="#configuration"><span>Configuration</span></a></h1><h2 id="technology-overview" tabindex="-1"><a class="header-anchor" href="#technology-overview"><span>Technology Overview</span></a></h2><h3 id="overview" tabindex="-1"><a class="header-anchor" href="#overview"><span>Overview</span></a></h3><p>In this section, we will introduce the Prism Central (PC) graphical user interface (GUI), familiarize you with it&#39;s layout and navigation.</p><h3 id="prism-central" tabindex="-1"><a class="header-anchor" href="#prism-central"><span>Prism Central</span></a></h3><ol><li><p>Enter <em>PC-IP-ADDRESS</em> into a new browser tab.</p><p><img src="/images/loginpage.png" alt="Login Page"></p></li><li><p>If present, click on the &quot;Log in with your Nutanix Local Account&quot; link</p><div class="hint-container note"><p class="hint-container-title">Prism Central supports integration with many authentication providers, for this lab we will be using local accounts</p></div></li><li><p>Log in using the following credentials:</p><ul><li>Username - admin</li><li>Password - <em>HPOC-PASSWORD-PROVIDED-BY-INSTRUCTOR</em></li></ul></li><li><p>After you log into PC, familiarize yourself with the GUI. Explore the information on the Dashboard, as well as the sidebar.</p></li><li><p>The Search feature is extremely useful in Prism Central, and the &#39;/&#39; key is a shortcut to access it from anywhere. You can use the search feature to access individual entities or entire configuration pages.</p></li></ol><h3 id="takeaways" tabindex="-1"><a class="header-anchor" href="#takeaways"><span>Takeaways</span></a></h3><ul><li>Prism Central is a thoughtfully laid-out GUI.</li><li>Critical information is displayed front and center.</li></ul><h2 id="storage-configuration" tabindex="-1"><a class="header-anchor" href="#storage-configuration"><span>Storage Configuration</span></a></h2><h3 id="storage-overview" tabindex="-1"><a class="header-anchor" href="#storage-overview"><span>Storage Overview</span></a></h3><p>In this section, we will use Prism Central to perform a basic container setup</p><h3 id="distributed-storage-fabric" tabindex="-1"><a class="header-anchor" href="#distributed-storage-fabric"><span>Distributed Storage Fabric</span></a></h3><p>The Nutanix Distributed Storage Fabric (DSF) presents storage to the hypervisor in a way that looks identical as if it were presented from any centralized storage array. However, Nutanix uses Controller VMs (CVMs) combined with the local storage within each node to provide shared storage for the cluster that is both redundant and resilient. The combination of computing and distributed local storage resources is now commonly referred to as Hyper-converged Infrastructure (HCI).</p><p><img src="/images/dsf_overview.01297b21.png" alt="alt text"></p><p>As a pioneer in the HCI space, Nutanix DSF is a mature solution capable of delivering the performance and resiliency needed to support many different workloads, including enterprise databases, virtual desktops, Remote Office - Branch Office (ROBO), Big Data, and more.</p><p>The two main storage constructs within the DSF are the Storage Pool and Storage Containers.</p><p>The Storage Pool is the aggregation of all of the physical disks within a given Nutanix cluster. The cluster manages data distribution, so other storage pools (like LUNs in a traditional storage environment) are not required. As new nodes are added to a cluster, disks are automatically added to the pool, and the cluster will begin re-distributing data to the new disks as a background task.</p><p>The Storage Containers are software-defined, logical constructs that allow you to configure storage policy for groups of VMs or vDisks. In the next exercise, you will walk through the process for creating and configuring Nutanix storage within Prism.</p><div class="hint-container note"><p class="hint-container-title">To learn more about additional DSF constructs such as vDisks, extents, and extent groups, refer to the Nutanix Bible.</p></div><h3 id="prism-central-storage-configuration-items" tabindex="-1"><a class="header-anchor" href="#prism-central-storage-configuration-items"><span>Prism Central Storage Configuration Items</span></a></h3><h4 id="configure-storage-containers" tabindex="-1"><a class="header-anchor" href="#configure-storage-containers"><span>Configure Storage Containers</span></a></h4><p>Lets use PC to perform a basic container setup.</p><ol><li><p>From the sidebar menu, select Compute &amp; Storage and then Storage Containers (OR Type “Storage Containers” in the search box and select “Storage Containers -&gt; List”)</p><p><img src="/images/aos_on_ahv_pc_menu.png" alt="Drop Down Menu"></p></li><li><p>Click the “Create Storage Container Button”</p></li><li><p>Fill in the following fields:</p><ul><li>Name: <em>Initials</em>-Container</li><li>Click on Advanced Settings <ul><li>Reserved Capacity: 0</li><li>Advertised Capacity: 500</li></ul></li></ul><p><img src="/images/aos_on_ahv_pc_sc_sample.png" alt="Example SG Configuration"></p></li><li><p>Click the blue &quot;Create&quot; button.</p><p>In a moment you should see your container appear in the container list. You can use the filter bar at the top of the list to help locate it. This is a common feature you&#39;ll find throughout the Prism Central interface.</p><p><img src="/images/aos_on_ahv_pc_sc_list.png" alt="Example SG List"></p><p>The storage container is now instantly available across all nodes within the cluster. You can create multiple containers with different policies, all sharing capacity from the Storage Pool.</p><p>You may want to enable deduplication for a storage container used for full clone persistent virtual desktops. Deduplication wouldn&#39;t make sense for workloads such as databases. Similarly you may want to create a storage container with erasure coding enabled for archival data such as backups or security footage.</p><p>Explore the configuration basics further by updating your Container configuration. How would you ensure capacity availability for critical VMs on a cluster running mixed workloads?</p></li></ol><h4 id="reviewing-storage-containers" tabindex="-1"><a class="header-anchor" href="#reviewing-storage-containers"><span>Reviewing Storage Containers</span></a></h4><ol><li><p>Click on the name of a storage container that already contains data.</p></li><li><p>You will immediately see the summary information about the container with an overview of it&#39;s current state and performance.</p><p><img src="/images/aos_on_ahv_pc_sc_summary.png" alt="Example SG List"></p></li><li><p>By reviewing the tabs at the top you can also get information on any alerts and events related to the container, along with performance metrics and storage utilization over time.</p><p><img src="/images/aos_on_ahv_pc_sc_details.png" alt="Example SG List"></p></li></ol><h4 id="replication-factor" tabindex="-1"><a class="header-anchor" href="#replication-factor"><span>Replication Factor</span></a></h4><p>The Nutanix platform currently uses replication factor (RF), and checksum to ensure data redundancy and availability in the case of a node or disk failure or corruption. RF sets the number of data copies to maintain (2 or 3). A replication factor of 3 adds an extra layer of data protection at the cost of storage an additional data copy.</p><p>Block Awareness ensures that secondary copies of data are not written to a node within the same physical enclosure as the primary copy. Block Awareness allows for the loss of a multi-node block without experiencing data unavailability. The same concept can be applied using a Nutanix cluster spanning multiple racks.</p><p>The basic requirement for rack/block fault tolerance is to have a minimum of 3 blocks in the cluster (for RF2) as we need to store three copies of metadata. Rack and block awareness can be supported with erasure coding enabled.</p><ol><li><p>From the sidebar, click on Hardware and Clusters (OR type “Clusters” and select “Clusters-&gt;List” in the search bar)</p><p><img src="/images/aos_on_ahv_pc_rf_menu.png" alt="Example SG List"></p></li><li><p>Click on the name of your cluster</p></li><li><p>Click on &quot;OK&quot; in the Data Resiliency Status Pane</p><p><img src="/images/aos_on_ahv_pc_rf_ok.png" alt="Example SG List"></p><p>Data Resiliency Status indicates how many failures can be tolerated without impacting the cluster. Each service listed has a specific function in the cluster. For example, Zookeeper nodes maintain configuration data (service states, IPs, host information, etc.) for the cluster.</p><p><img src="/images/aos_on_ahv_pc_rf_dr.png" alt="Example SG List"></p><p>The Redundancy State of a Cluster can be managed by selecting the Cluster under the Hardware section, clicking the “More” dropdown and selecting “Manage Redundancy State”</p><p><img src="/images/aos_on_ahv_pc_rf_configuration.png" alt="Example SG List"></p><p>An RF2 cluster can be upgraded to support RF3 (which requires a minimum of 5 nodes), or downgraded to RF1 with the following caveat:</p></li></ol><div class="hint-container warning"><p class="hint-container-title">Enabling RF1 does not guarantee data availability. Nutanix recommends enabling RF1 when your primary cluster use case is running applications that do not require storage resiliency.</p></div><h3 id="storage-takeaways" tabindex="-1"><a class="header-anchor" href="#storage-takeaways"><span>Storage Takeaways</span></a></h3><ul><li>The Distributed Storage Fabric provides RF2 or RF3 shared storage to the cluster.</li><li>Storage Containers allow you define storage policy for VMs, including RF level, compression, deduplication, and erasure coding.</li></ul><h2 id="network-configuration" tabindex="-1"><a class="header-anchor" href="#network-configuration"><span>Network Configuration</span></a></h2><h3 id="networking-overview" tabindex="-1"><a class="header-anchor" href="#networking-overview"><span>Networking Overview</span></a></h3><p>In this section, you will learn how to set up a network. The networks you create in the steps below provide VMs with connectivity by assigning the appropriate networks to the VM&#39;s respective virtual network interface cards (NICs).</p><h3 id="ahv-networking-background" tabindex="-1"><a class="header-anchor" href="#ahv-networking-background"><span>AHV Networking Background</span></a></h3><p>Nutanix&#39;s Acropolis Hypervisor (AHV) leverages Open vSwitch (OVS) for all VM networking. OVS is an open-source software switch designed to work in a multi-server virtualization environment. Each AHV server maintains an OVS instance, and all OVS instances combine to form a single logical switch.</p><p>Each node is typically uplinked to a physical switch to multiple virtual LANs (VLANs), exposed as virtual networks.</p><p>VM networking is configured through Prism (or optionally CLI/REST), making network management in AHV very simple.</p><p>With AHV, you can also set up a DHCP server to automatically provide IP addresses for VMs on that network using the IP address management (IPAM) service. IPAM can potentially make network management more straightforward, as you wouldn&#39;t have to set up a separate DHCP server for the network.</p><h4 id="virtual-networks" tabindex="-1"><a class="header-anchor" href="#virtual-networks"><span>Virtual Networks</span></a></h4><ul><li>Similar to a VMware distributed port group.</li><li>Each virtual NIC belongs to precisely one virtual network.</li><li>Each virtual network is a common point of configuration for a group of vNICs.</li><li>Physical switch port must be configured to trunk VLANs.</li></ul><h4 id="virtual-nics-of-vms" tabindex="-1"><a class="header-anchor" href="#virtual-nics-of-vms"><span>Virtual NICs of VMs</span></a></h4><ul><li><p>For IPAM-enabled networks, vNICs get life-long (Life of the VM) static IP assignments.</p></li><li><p>User may configure pools to allocate IPs, either automatically or by specifying the IP manually.</p><p><img src="/images/aos_on_ahv_net_vnic.png" alt="Example SG List"></p></li></ul><h4 id="ip-address-management-ipam" tabindex="-1"><a class="header-anchor" href="#ip-address-management-ipam"><span>IP Address Management (IPAM)</span></a></h4><ul><li><p>Integrated DHCP Server with a physical scope of a single Nutanix Cluster.</p></li><li><p>AHV intercepts DHCP requests from guests on IPAM networks, and injects responses. AHV does not respond to requests from outside of the cluster.</p></li><li><p>Supports DHCP options, with UI support for DNS and TFTP configuration.</p><p><img src="/images/aos_on_ahv_net_ipam.png" alt="Example SG List"></p></li></ul><h3 id="configure-networking" tabindex="-1"><a class="header-anchor" href="#configure-networking"><span>Configure Networking</span></a></h3><p>In the following exercise, you will create networks using invalid VLANs, meaning no VM traffic will be transmitted outside an individual host. This behavior is expected for demonstration/education purposes only.</p><h4 id="create-a-subnet-without-ipam" tabindex="-1"><a class="header-anchor" href="#create-a-subnet-without-ipam"><span>Create a Subnet without IPAM</span></a></h4><p>We’re going to create a new subnet/network in Prism Central. You may use any VLAN ID <em>other</em> than 0.</p><ol><li><p>From the sidebar, click on Network &amp; Security and select “Subnets” (Or just search “Subnets” in the search field)</p><p><img src="/images/aos_on_ahv_pc_net_menu.png" alt="alt text"></p></li><li><p>Click on the Blue &quot;Create Subnet&quot; Button</p></li><li><p>Enter the following information</p><ul><li>Subnet Name: <em>Initials</em>-Network</li><li>Type: VLAN</li><li>Cluster: <em>Select your cluster</em></li><li>VLAN ID: <em>Select a value between 3000 and 4000</em></li><li>Default switch: vs0</li><li>Enable IP Address Management: <em>UNCHECKED</em></li></ul><p><img src="/images/aos_on_ahv_net_network1.png" alt="Network No IPAM"></p></li><li><p>Click Create</p></li></ol><p>Note that this is where one would create Overlay Networks used for VPCs and you can also select which virtual switch that one would want this VLAN to be assigned to. A VLAN ID can only be configured on a single virtual switch to avoid accidentally bridging networks.</p><h4 id="create-a-subnet-with-ipam" tabindex="-1"><a class="header-anchor" href="#create-a-subnet-with-ipam"><span>Create a Subnet with IPAM</span></a></h4><ol><li><p>Click on the Blue &quot;Create Subnet&quot; Button</p></li><li><p>Enter the following information</p><ul><li>Subnet Name: <em>Initials</em>-Network_IPAM</li><li>Type: VLAN</li><li>Cluster: <em>Select your cluster</em></li><li>VLAN ID: <em>Select a value between 3000 and 4000</em></li><li>Default switch: vs0</li><li>Enable IP Address Management: <em>Checked</em></li><li>Network IP Address / Prefix Length: <em>10.0.0.0/24</em></li><li>Gateway : 10.0.0.1 <ul><li>Be sure to check the blue checkbox when creating the pool range</li><li>Multiple valid ranges can be added to this box</li></ul></li><li>Override DHCP Server: UNCHECKED</li></ul></li><li><p>Click the &quot;Add IP Pool&quot; button</p><ul><li>Start Address: <em>10.0.0.10</em></li><li>End Address: <em>10.0.0.50</em></li></ul><p>Click the blue check mark to save the pool range</p><p><img src="/images/aos_on_ahv_net_network2.png" alt="alt text"></p><p>Note you will see a dropdown for “Domain Settings’. This is where you would add DNS servers, domain search information, and you could provide the TFTP Server name and boot file information for PXE booting servers. For our case we’re going to leave these items blank.</p></li><li><p>Click Save</p><p>The configured virtual network will now be available across all nodes within the cluster. VMs with vNICs on this network will receive a DHCP address from the range specified. This IP assignment lasts for the <strong>life of the VM</strong>, avoiding the need to depend on DHCP reservations or static IPs for many workloads.</p></li></ol><h3 id="networking-takeaways" tabindex="-1"><a class="header-anchor" href="#networking-takeaways"><span>Networking Takeaways</span></a></h3><ul><li>It&#39;s effortless to set up a network in the cluster to establish VM connectivity.</li><li>IPAM is very simple to set up within a network, and it can significantly simplify IP management within the cluster.</li></ul></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="vp-meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: ktelep@gmail.com">Kurt Telep</span><!----><!--]--><!--]--></span></div></div></footer><nav class="vp-page-nav" aria-label="page navigation"><a class="route-link route-link-active auto-link prev" href="/aos_on_ahv_pc/" aria-label="AOS on AHV Bootcamp (PC)"><div class="hint"><span class="arrow left"></span> Prev</div><div class="link"><span>AOS on AHV Bootcamp (PC)</span></div></a><a class="route-link auto-link next" href="/aos_on_ahv_pc/DeployingWorkloads.html" aria-label="Deploying Workloads"><div class="hint">Next <span class="arrow right"></span></div><div class="link"><span>Deploying Workloads</span></div></a></nav><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-6qZbiVGh.js" defer></script>
  </body>
</html>
