<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.18" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme')
      const systemDarkMode =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (userMode === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (userMode === 'dark' || systemDarkMode) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <title>Data Protection | ktelep.github.io</title><meta name="description" content="Homepage of Kurt Telep">
    <link rel="preload" href="/assets/style-PoWje89h.css" as="style"><link rel="stylesheet" href="/assets/style-PoWje89h.css">
    <link rel="modulepreload" href="/assets/app-6qZbiVGh.js"><link rel="modulepreload" href="/assets/DataProtection.html-CUvPCskm.js">
    <link rel="prefetch" href="/assets/index.html-Dw5uNsX7.js" as="script"><link rel="prefetch" href="/assets/bootcamps.html-B-RgS2xt.js" as="script"><link rel="prefetch" href="/assets/get-started.html-coS475Ky.js" as="script"><link rel="prefetch" href="/assets/ntnxce.html-CxagtDMa.js" as="script"><link rel="prefetch" href="/assets/projects.html-7h8nms-c.js" as="script"><link rel="prefetch" href="/assets/Ansible.html-BhNaDiSx.js" as="script"><link rel="prefetch" href="/assets/Configuration.html-DkYK4mQd.js" as="script"><link rel="prefetch" href="/assets/Labprep.html-5c3wiNUO.js" as="script"><link rel="prefetch" href="/assets/index.html-BP8iHIaV.js" as="script"><link rel="prefetch" href="/assets/Terraform.html-C9X4IUxi.js" as="script"><link rel="prefetch" href="/assets/Configuration.html-Bryv0a-u.js" as="script"><link rel="prefetch" href="/assets/DeployingWorkloads.html-DEGG7KxH.js" as="script"><link rel="prefetch" href="/assets/Labprep.html-Ckpy0Qpu.js" as="script"><link rel="prefetch" href="/assets/ManagingWorkloads.html-tBZEb3Ul.js" as="script"><link rel="prefetch" href="/assets/index.html-CDafYv0p.js" as="script"><link rel="prefetch" href="/assets/404.html-lK_626jw.js" as="script"><link rel="prefetch" href="/assets/setupDevtools-7MC2TMWH-D_nNDbBg.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/"><!----><span class="vp-site-name" aria-hidden="true">ktelep.github.io</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/" aria-label="Home"><!---->Home<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/bootcamps.html" aria-label="Bootcamps"><!---->Bootcamps<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/ntnxce.html" aria-label="CE"><!---->CE<!----></a></div><!--]--></nav><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/" aria-label="Home"><!---->Home<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/bootcamps.html" aria-label="Bootcamps"><!---->Bootcamps<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/ntnxce.html" aria-label="CE"><!---->CE<!----></a></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><a class="route-link route-link-active auto-link vp-sidebar-item vp-sidebar-heading" href="/aos_on_ahv_pc/" aria-label="AOS on AHV Bootcamp (PC)"><!---->AOS on AHV Bootcamp (PC)<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/aos_on_ahv_pc/Configuration.html" aria-label="Configuration"><!---->Configuration<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/aos_on_ahv_pc/DeployingWorkloads.html" aria-label="Deploying Workloads"><!---->Deploying Workloads<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/aos_on_ahv_pc/ManagingWorkloads.html" aria-label="Managing Workloads"><!---->Managing Workloads<!----></a><!----></li><li><a class="route-link route-link-active auto-link vp-sidebar-item vp-sidebar-heading active" href="/aos_on_ahv_pc/DataProtection.html" aria-label="Data Protection"><!---->Data Protection<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/aos_on_ahv_pc/Labprep.html" aria-label="Lab Prep"><!---->Lab Prep<!----></a><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div class="theme-default-content" vp-content><!--[--><!--]--><div><h1 id="data-protection" tabindex="-1"><a class="header-anchor" href="#data-protection"><span>Data Protection</span></a></h1><p>Nutanix provides the ability to perform VM/vDisk-level storage recovery points. Protection Policies are the construct for grouping VMs and applying recovery points and replication policies.</p><p>In this section, you will use Prism to create and restore from VM recovery points and create a Protection Policy for your VMs</p><h2 id="vm-recovery-points" tabindex="-1"><a class="header-anchor" href="#vm-recovery-points"><span>VM Recovery Points</span></a></h2><p>Recovery points are similar in form and functionality as snapshots, they are managed from within Prism Central across all attached clusters. Recovery Points can even be on-demand replicated to other clusters in your environment.</p><ol><li><p>From the Sidebar, select “Compute &amp; Storage -&gt; VMs” or search “VMs” in the search bar and selecting “VMs -&gt; List”</p></li><li><p>Right-click on <em>Initials</em>-LinuxVM-1 (One of your cloned Linux VMs)</p><p><img src="/images/aos_on_ahv_dp_rpmenu.png" alt="RPMenu"></p></li><li><p>Fill in the following fields:</p><ul><li>Recovery Point Name: <em>Initials</em>-Linux-RP</li><li>Expiry Date: <em>Tomorrow&#39;s Date</em></li><li>Leave other boxes unchecked</li></ul><p><img src="/images/aos_on_ahv_dp_rpcreate.png" alt="RPMenu"></p><div class="hint-container note"><p class="hint-container-title">App Consistent Recovery Points leverage Nutanix Guest Tools (NGT) to make the appropriate calls to VSS to quiesce the application before a recovery point is taken.</p></div><div class="hint-container warning"><p class="hint-container-title">Setting a non-expiring Recovery Point means that even if the VM is deleted those recovery points will NOT be removed from the system.</p></div></li><li><p>Click the blue &quot;Create&quot; button</p></li><li><p>Click on the Name of the VM you created your Recovery Point, then the &quot;Recovery Points&quot; tab to view the list of Recovery Points for this VM.</p><p><img src="/images/aos_on_ahv_dp_rplist.png" alt="RPMenu"></p><p>Note how you can see the create time of the Recovery Point, along with when it&#39;s expiring and where it currently resides. You will also see if it is a Crash Consistent or Application Consistent Recovery Point. ANY Recovery Point created by the system or the user will appear in this list and any are available for recovery.</p></li></ol><p>Now it&#39;s time to BREAK STUFF</p><ol><li><p>Click on the Summary Tab and the Update Button</p><p><img src="/images/aos_on_ahv_dp_rpupdate.png" alt="RPMenu"></p></li><li><p>Update the CPU field to read <em>2</em> vCPU</p></li><li><p>Click &quot;Next&quot; to go to the Resources Tab</p></li><li><p>Remove the Disk by clicking the Trashcan Icon next to the device</p><p><img src="/images/aos_on_ahv_dp_rprmdisk.png" alt="RPMenu"></p></li><li><p>Click &quot;Next&quot; twice to get to the Review Tab</p></li><li><p>Click &quot;Save&quot; to save your updates</p></li><li><p>Power on the VM and Connect to the console</p><p>You will see that the VM does not boot (because it has no boot disk) and states &quot;No bootable device&quot;</p><p><img src="/images/aos_on_ahv_dp_rpconsole.png" alt="RPMenu"></p></li><li><p>Power the VM back off.</p></li><li><p>Click on the Recovery Points Tab again and set the Checkbox next to the Recovery Point and click &quot;Actions&quot; -&gt; &quot;Clone&quot;</p><p><img src="/images/aos_on_ahv_dp_rpclone.png" alt="RPMenu"></p></li><li><p>A popup will appear, asking for the New Name for the VM, you can change it or leave the default with the timestamp of the recovery.</p><p><img src="/images/aos_on_ahv_dp_rpcloneconfirm.png" alt="RPMenu"></p></li><li><p>Go to the VMs list by clicking VMs on the sidebar, note that the cloned VM has the original number of vCPUs attached. Power On the clone VM.</p><p><img src="/images/aos_on_ahv_dp_rpcompare.png" alt="RPMenu"></p></li><li><p>Launch the Console and see that the VM now boots.</p></li></ol><div class="hint-container note"><p class="hint-container-title">You can also in-place restore a VM using the &quot;Revert&quot; functionality, however a more common workflow is to recover into a clone and validate, removing the old VM.</p></div><h2 id="protection-policies" tabindex="-1"><a class="header-anchor" href="#protection-policies"><span>Protection Policies</span></a></h2><p>Protection Policies provide a method for automating protection of your virtual machines, whether locally or through replication to another cluster. We will only be working with local protection as we only have one cluster, however the same process applies to replicated policies. Protection Policies will automatically create Recovery Points that are available for recovery</p><ol><li><p>In the Sidebar, click on &quot;Data Protection&quot; -&gt; &quot;Protection Policies&quot;</p><p><img src="/images/aos_on_ahv_dp_ppmenu.png" alt="RPMenu"></p></li><li><p>Click the blue &quot;Create Protection Policy&quot; Button</p></li><li><p>Fill out the Following Fields:</p><ul><li>Policy name: <em>Initials</em>_PP_Hourly</li><li>Primary Location: <ul><li>Location: Local AZ</li><li>Cluster; <em>Your Cluster</em></li></ul></li></ul><p><img src="/images/aos_on_ahv_dp_ppcreate.png" alt="RPMenu"></p></li><li><p>Click the &quot;Save&quot; link under the Primary Location</p></li><li><p>On the right-hand side of the screen, click the &quot;Cancel&quot; link in the &quot;Recovery Location&quot; box.</p><p><img src="/images/aos_on_ahv_dp_ppremote.png" alt="RPMenu"></p><div class="hint-container note"><p class="hint-container-title">This is where we would select the target cluster(s) for remote replication</p></div></li><li><p>Back under Primary Location, click the &quot;+ Add Local Schedule&quot; Link</p><p><img src="/images/aos_on_ahv_dp_ppadd.png" alt="RPMenu"></p></li><li><p>In the Add Schedule Popup fill in the following fields:</p><ul><li>Take Recovery Point Every: <em>Hour(s)</em> <em>1</em></li><li>Retention Type: <em>Linear</em></li><li>Retention on Local AZ: <em>24</em> Recovery Points</li></ul><p><img src="/images/aos_on_ahv_dp_ppsched.png" alt="RPMenu"></p><p>This configuration will take a Recovery Point every hour and keep 24 of them on the local cluster. It will then expire the oldest when it takes the newest Recovery Point. Take a moment to hover over the &quot;?&quot; next to Linear and Roll-up to understand the difference.</p><div class="hint-container note"><p class="hint-container-title">The schedule for Protection Policies will only impact Recovery Points created by that policy. It will not remove or expire Recovery Points created manually or by other processes or tools such as 3rd party backup software.</p></div></li><li><p>Click &quot;Save Schedule&quot;</p></li><li><p>Click &quot;Next&quot; in the lower right hand corner.</p></li><li><p>The &quot;Add Entities&quot; screen is where we would add &quot;Categories&quot; to group VMs that should be protected together, for our purposes we are going to individually select the VMs to protect so you can just move forward and click &quot;Create&quot; in the lower right hand corner.</p></li><li><p>Click on &quot;VMs&quot; in the side bar and locate your <em>Initials</em>-LinuxVM-2 Virtual machine</p></li><li><p>Right Click on the VM and select &quot;Protect&quot;</p><p><img src="/images/aos_on_ahv_dp_ppprotmenu.png" alt="RPMenu"></p></li><li><p>Select your protection policy to assign the VM to the <em>Initials</em>_PP_Hourly Policy</p><p><img src="/images/aos_on_ahv_dp_ppsel.png" alt="RPMenu"></p></li><li><p>Click on the &quot;Protect&quot; button in the lower right hand corner.</p><p>At this point, the VM has been added to the Protection Policy and it will immediately begin creating Recovery Points for it based on the selected schedule.</p></li><li><p>Click on the VM name and go to the Recovery Points tab. You will see the first Recovery Point has been created and it&#39;s Expiration is in 23 hours. If for any reason the system is unable to create a new recovery point it will update this recovery points expiration.</p><p><img src="/images/aos_on_ahv_dp_pprps.png" alt="RPMenu"></p></li></ol><p>That&#39;s it, you&#39;ve now automated taking recovery points of your virtual machines for data protection. Remember that Nutanix recovery points are based on &quot;Redirect-on-Write&quot; technology so they do not have performance impact on the virtual machine and can be taken much more frequently than traditional hypervisor snapshots.</p><h2 id="takeaways" tabindex="-1"><a class="header-anchor" href="#takeaways"><span>Takeaways</span></a></h2><ul><li>Nutanix offers data protection solutions for virtual datacenters via different strategies, including one-to-one or one-to-many replication.</li><li>Nutanix provides data protection functions at the VM, file, and volume group level, so VMs and data remain safe.</li><li>VM-level recovery-points and replication policies can be managed through Prism Central for any supported hypervisor.</li></ul></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="vp-meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: ktelep@gmail.com">Kurt Telep</span><!----><!--]--><!--]--></span></div></div></footer><nav class="vp-page-nav" aria-label="page navigation"><a class="route-link auto-link prev" href="/aos_on_ahv_pc/ManagingWorkloads.html" aria-label="Managing Workloads"><div class="hint"><span class="arrow left"></span> Prev</div><div class="link"><span>Managing Workloads</span></div></a><a class="route-link auto-link next" href="/aos_on_ahv_pc/Labprep.html" aria-label="Lab Prep"><div class="hint">Next <span class="arrow right"></span></div><div class="link"><span>Lab Prep</span></div></a></nav><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-6qZbiVGh.js" defer></script>
  </body>
</html>
